<section class="content-header">
	<h1> 
		Scale Up 
		<small>Spawn multiple DPI Simulators against a MW</small>
	</h1>
</section>

<section class="content">
<div class="row">
	<div class="col-xs-6">
		<div class="box box-warning">
			<div class="box-body">

				<div class="col-xs-3">
					<label>Enter MW IP</label>
					<!--<input type="text" class="form-control" ng-model="selectedIp"/>-->
					<autocomplete ng-model="selectedIp" data="ipList"></autocomplete>
	            </div>
	            <div class="col-xs-2">
					<label>DPI #</label>
					<input type="number" ng-model="dpiNum" class="form-control" onkeypress="return isNumberKey(event)">
	            </div>

	            <div class="col-xs-3">
					<label>Flow Rate (msg/s)</label>
					<input type="number" ng-model="flowRate" class="form-control" onkeypress="return isNumberKey(event)">
	            </div>
	            
	            <div class="col-xs-2">
					<button class="btn btn-block btn-success" style="margin-top:25px" ng-if="starting==false" ng-click="startDpis(selectedIp, dpiNum, flowRate)">Start</button>
					<button class="btn btn-block btn-warning" style="margin-top:25px" ng-if="starting==true">Starting...</button>
				</div>

	            <div class="col-xs-2">
					<!--<input type="submit" value="Stop" style="margin-top:25px" class="btn btn-block btn-danger">-->
					<button class="btn btn-block btn-danger" style="margin-top:25px" ng-if="stopping==false" ng-click="stopAllDpi()">Stop All</button>
					<button class="btn btn-block btn-warning" style="margin-top:25px" ng-if="stopping==true">Stopping...</button>
				</div>
				<div class="form-group col-xs-12">
				<br>
                  	<textarea class="form-control" ng-model="serverResponse" rows="10" placeholder="Response from server" disabled></textarea>
                </div>

			</div>
		</div>
	</div>

	<div class="col-xs-5">
		<div class="box box-warning">
			<div class="box-header">
				<h3 class="box-title">MW Box List</h3>
			</div>
			
			<div class="box-body table-responsive no-padding">
				<table class="table table-hover">
					<tbody>
						<tr>
							<th>IP</th>
							<th>Hostname</th>
							<th>Status</th>
						</tr>
						<tr ng-repeat="h in hosts">
							<td>{{h.ip}}</td>
							<td>{{h.hostname}}</td>
							<td><span class="label label-success">Online</span></td>
						</tr>						
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<div class="col-md-11">
		<div class="box box-warning">

			<div class="box-header with-border">
				<h3 class="box-title">DPI List</h3>
			</div>

			<div class="box-body">
				<table class="table table-bordered">
					<tr>
						<th style="width:100px">Box ID</th>
						<th style="width:200px">Progress</th>
						<th style="width:100px">Box IP</th>
						<th style="width:150px">MAC Address</th>
						<th style="width:100px">Status</th>
						<th style="width:100px">Action</th>
						<th style="widt:350px">Message</th>
					</tr>
					<tr ng-repeat="d in dpiList">
						<td>{{d.box_id}}</td>
						<td>
							<div class="progress progress-xs">
								<div class="progress-bar progress-bar-danger" style="width: 55%"></div>
							</div>
						</td>
						<td>{{d.ip}}</td>
						<td>{{d.mac}}</td>
						<td>
							<span ng-if="d.online==true" class="label label-success">Online</span>
							<span ng-if="d.online==false" class="label label-danger">Offline</span>
						</td>
						<td><button class="btn btn-block btn-primary btn-xs" ng-click="changeScaleUpDpiStatus(selectedIp, d.dpi_id)">Change Status</button></td>
						<td>{{d.message}}</td>
					</tr>
				</table>
			</div>

			<div class="box-footer clearfix">
				<!--
				<ul class="pagination pagination-sm no-margin pull-right">
					<li><a href="#">&laquo;</a></li>
					<li><a href="#">1</a></li>
					<li><a href="#">2</a></li>
					<li><a href="#">3</a></li>
					<li><a href="#">&raquo;</a></li>
				</ul>
				-->
			</div>
		</div>
	</div>
</div>
</section>
<script>
	function isNumberKey(evt){
	    var charCode = (evt.which) ? evt.which : event.keyCode
	    if (charCode > 31 && (charCode < 48 || charCode > 57))
	        return false;
	    return true;
	}    
</script>